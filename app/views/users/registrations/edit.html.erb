<div class="form-group container card border-primary col-md-5 my-4 px-4">

<label class="form-label mt-4"><h2>Edit Profile</h2></label>


<%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put }) do |f| %>
  <%= render "users/shared/error_messages", resource: resource %>


<div class="form-group mb-3">
  <% current_user.avatar do |avatar| %>
    <%= hidden_field :user, :avatar, multiple: false, value: avatar.identifier %>
        <% end %>
      <label class="form-label mt-4"><%= f.label :avatar %><br /></label>
    <%= f.file_field :avatar, class: "form-control mb-2", type: "file", id: "formFile" %>
    <br>
    <% if current_user.avatar? %>
    <%= image_tag current_user.avatar.url %>
    <br>
    <% else %>
    <%= image_tag '/assets/default-avatar.jpg' %>
    <% end %>
</div>

  <div class="field form-floating mb-3">
    <%= f.text_field :name, autofocus: true, autocomplete: "First Name", class: "form-control", id: "floatingInput" %>
    <label for="floatingInput">First Name</label>
  </div>
  <div class="em1">May be publicly visible, do not use real email address!</div>
<div class="field form-floating my-3">
    <%= f.email_field :email, autofocus: true, autocomplete: "email", class: "form-control", id: "floatingInput" %>
    <label for="floatingInput">Email Address</label>
  </div>

  <% if devise_mapping.confirmable? && resource.pending_reconfirmation? %>
    <div>Currently waiting confirmation for: <%= resource.unconfirmed_email %></div>
  <% end %>


<div class="field form-floating mt-5">
    <%= f.password_field :password, autocomplete: "new-password", class: "form-control", id: "floatingInput" %>
    <label for="floatingInput">New Password <i>(leave blank if you don't want to change it)</i></label>
    <% if @minimum_password_length %>
      <em><%= @minimum_password_length %> characters minimum</em>
    <% end %>
  </div>


  <div class="field form-floating mb-4">
    <%= f.password_field :password_confirmation, autocomplete: "new-password", class: "form-control", id: "floatingInput" %>
    <label for="floatingInput">New Password <i>(confirm)</i></label>
  </div>

 <hr>

<div class="border border-solid border-primary p-2">
<div class="field form-floating">
    <%= f.password_field :current_password, autocomplete: "current-password", class: "form-control", id: "floatingInput" %>
    <label for="floatingInput">Current Password </label>
    <p><i>(we need your current password to confirm your changes)</i></p>
  </div>
</div>

  <div class="actions mt-2">
    <%= f.submit "Update Profile", class: "btn btn-primary" %>
  </div>
<% end %>

<hr>




 <button class="btn btn-small btn-secondary mb-2" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasExample" aria-controls="offcanvasExample">
   Close Account
 </button>

 <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasExample" aria-labelledby="offcanvasExampleLabel">
   <div class="offcanvas-header">
     <h5 class="offcanvas-title" id="offcanvasExampleLabel">My Account</h5>
     <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
   </div>
   <div class="offcanvas-body">
     <div>
       <div class="form-floating my-3">
       <h4><p class="text-danger">Cancel my account</p></h4>

       <p class="text-danger">Unhappy? Permanently delete your account.<%= button_to "DELETE", registration_path(resource_name), data: { confirm: "Are you sure?" }, method: :delete, class: "btn btn-danger" %></p>

       <%= link_to "Cancel", edit_user_registration_path %>

        </div>
     </div>
   </div>
 </div>


   <li class="list-group-item d-flex justify-content-between align-items-start col-md-8">
     <div class="ms-2 me-auto">
       <div class="fw-bold">Username: </div>
     </div>
     <span class="badge bg-primary rounded-pill"><%= @user.name %></span>
   </li>
   <li class="list-group-item d-flex justify-content-between align-items-start col-md-8">
     <div class="ms-2 me-auto">
       <div class="fw-bold">Sign in Count:</div>
     </div>
     <span class="badge bg-primary rounded-pill"><%= @user.sign_in_count %></span>
   </li>
   <li class="list-group-item d-flex justify-content-between align-items-start col-md-8">
     <div class="ms-2 me-auto">
       <div class="fw-bold">Last Online:</div>
     </div>
     <span class="badge bg-primary rounded-pill"><%= time_ago_in_words(@user.last_sign_in_at) %> ago</span>
   </li>
   <li class="list-group-item d-flex justify-content-between align-items-start col-md-8">
     <div class="ms-2 me-auto">
       <div class="fw-bold">Current IP:</div>
     </div>
     <span class="badge bg-primary rounded-pill">01</span>
   </li>
    <br>
 </div>
